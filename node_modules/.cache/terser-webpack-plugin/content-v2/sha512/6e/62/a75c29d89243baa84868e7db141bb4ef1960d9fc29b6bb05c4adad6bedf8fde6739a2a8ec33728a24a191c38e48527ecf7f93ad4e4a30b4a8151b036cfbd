{"code":"!function(e){var t={};function R(n){if(t[n])return t[n].exports;var C=t[n]={i:n,l:!1,exports:{}};return e[n].call(C.exports,C,C.exports,R),C.l=!0,C.exports}R.m=e,R.c=t,R.d=function(e,t,n){R.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},R.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},R.t=function(e,t){if(1&t&&(e=R(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(R.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var C in e)R.d(n,C,function(t){return e[t]}.bind(null,C));return n},R.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(t,\"a\",t),t},R.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},R.p=\"\",R(R.s=1)}([function(e,t,R){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.METRIC=\"METRIC\",e.DIMENSION=\"DIMENSION\"}(t.ConceptType||(t.ConceptType={})),function(e){e.RENDER=\"RENDER\"}(t.MessageType||(t.MessageType={})),function(e){e.YEAR=\"YEAR\",e.YEAR_QUARTER=\"YEAR_QUARTER\",e.YEAR_MONTH=\"YEAR_MONTH\",e.YEAR_WEEK=\"YEAR_WEEK\",e.YEAR_MONTH_DAY=\"YEAR_MONTH_DAY\",e.YEAR_MONTH_DAY_HOUR=\"YEAR_MONTH_DAY_HOUR\",e.QUARTER=\"QUARTER\",e.MONTH=\"MONTH\",e.WEEK=\"WEEK\",e.MONTH_DAY=\"MONTH_DAY\",e.DAY_OF_WEEK=\"DAY_OF_WEEK\",e.DAY=\"DAY\",e.HOUR=\"HOUR\",e.MINUTE=\"MINUTE\",e.DURATION=\"DURATION\",e.COUNTRY=\"COUNTRY\",e.COUNTRY_CODE=\"COUNTRY_CODE\",e.CONTINENT=\"CONTINENT\",e.CONTINENT_CODE=\"CONTINENT_CODE\",e.SUB_CONTINENT=\"SUB_CONTINENT\",e.SUB_CONTINENT_CODE=\"SUB_CONTINENT_CODE\",e.REGION=\"REGION\",e.REGION_CODE=\"REGION_CODE\",e.CITY=\"CITY\",e.CITY_CODE=\"CITY_CODE\",e.METRO_CODE=\"METRO_CODE\",e.LATITUDE_LONGITUDE=\"LATITUDE_LONGITUDE\",e.NUMBER=\"NUMBER\",e.PERCENT=\"PERCENT\",e.TEXT=\"TEXT\",e.BOOLEAN=\"BOOLEAN\",e.URL=\"URL\",e.IMAGE=\"IMAGE\",e.CURRENCY_AED=\"CURRENCY_AED\",e.CURRENCY_ALL=\"CURRENCY_ALL\",e.CURRENCY_ARS=\"CURRENCY_ARS\",e.CURRENCY_AUD=\"CURRENCY_AUD\",e.CURRENCY_BDT=\"CURRENCY_BDT\",e.CURRENCY_BGN=\"CURRENCY_BGN\",e.CURRENCY_BOB=\"CURRENCY_BOB\",e.CURRENCY_BRL=\"CURRENCY_BRL\",e.CURRENCY_CAD=\"CURRENCY_CAD\",e.CURRENCY_CDF=\"CURRENCY_CDF\",e.CURRENCY_CHF=\"CURRENCY_CHF\",e.CURRENCY_CLP=\"CURRENCY_CLP\",e.CURRENCY_CNY=\"CURRENCY_CNY\",e.CURRENCY_COP=\"CURRENCY_COP\",e.CURRENCY_CRC=\"CURRENCY_CRC\",e.CURRENCY_CZK=\"CURRENCY_CZK\",e.CURRENCY_DKK=\"CURRENCY_DKK\",e.CURRENCY_DOP=\"CURRENCY_DOP\",e.CURRENCY_EGP=\"CURRENCY_EGP\",e.CURRENCY_ETB=\"CURRENCY_ETB\",e.CURRENCY_EUR=\"CURRENCY_EUR\",e.CURRENCY_GBP=\"CURRENCY_GBP\",e.CURRENCY_HKD=\"CURRENCY_HKD\",e.CURRENCY_HRK=\"CURRENCY_HRK\",e.CURRENCY_HUF=\"CURRENCY_HUF\",e.CURRENCY_IDR=\"CURRENCY_IDR\",e.CURRENCY_ILS=\"CURRENCY_ILS\",e.CURRENCY_INR=\"CURRENCY_INR\",e.CURRENCY_IRR=\"CURRENCY_IRR\",e.CURRENCY_ISK=\"CURRENCY_ISK\",e.CURRENCY_JMD=\"CURRENCY_JMD\",e.CURRENCY_JPY=\"CURRENCY_JPY\",e.CURRENCY_KRW=\"CURRENCY_KRW\",e.CURRENCY_LKR=\"CURRENCY_LKR\",e.CURRENCY_LTL=\"CURRENCY_LTL\",e.CURRENCY_MNT=\"CURRENCY_MNT\",e.CURRENCY_MVR=\"CURRENCY_MVR\",e.CURRENCY_MXN=\"CURRENCY_MXN\",e.CURRENCY_MYR=\"CURRENCY_MYR\",e.CURRENCY_NOK=\"CURRENCY_NOK\",e.CURRENCY_NZD=\"CURRENCY_NZD\",e.CURRENCY_PAB=\"CURRENCY_PAB\",e.CURRENCY_PEN=\"CURRENCY_PEN\",e.CURRENCY_PHP=\"CURRENCY_PHP\",e.CURRENCY_PKR=\"CURRENCY_PKR\",e.CURRENCY_PLN=\"CURRENCY_PLN\",e.CURRENCY_RON=\"CURRENCY_RON\",e.CURRENCY_RSD=\"CURRENCY_RSD\",e.CURRENCY_RUB=\"CURRENCY_RUB\",e.CURRENCY_SAR=\"CURRENCY_SAR\",e.CURRENCY_SEK=\"CURRENCY_SEK\",e.CURRENCY_SGD=\"CURRENCY_SGD\",e.CURRENCY_THB=\"CURRENCY_THB\",e.CURRENCY_TRY=\"CURRENCY_TRY\",e.CURRENCY_TWD=\"CURRENCY_TWD\",e.CURRENCY_TZS=\"CURRENCY_TZS\",e.CURRENCY_UAH=\"CURRENCY_UAH\",e.CURRENCY_USD=\"CURRENCY_USD\",e.CURRENCY_UYU=\"CURRENCY_UYU\",e.CURRENCY_VEF=\"CURRENCY_VEF\",e.CURRENCY_VND=\"CURRENCY_VND\",e.CURRENCY_YER=\"CURRENCY_YER\",e.CURRENCY_ZAR=\"CURRENCY_ZAR\"}(t.FieldType||(t.FieldType={})),function(e){e.DEFAULT=\"DEFAULT\",e.COMPARISON=\"COMPARISON\",e.SUMMARY=\"SUMMARY\"}(t.TableType||(t.TableType={})),function(e){e.METRIC=\"METRIC\",e.DIMENSION=\"DIMENSION\",e.MAX_RESULTS=\"MAX_RESULTS\"}(t.ConfigDataElementType||(t.ConfigDataElementType={})),function(e){e.TEXTINPUT=\"TEXTINPUT\",e.SELECT_SINGLE=\"SELECT_SINGLE\",e.CHECKBOX=\"CHECKBOX\",e.FONT_COLOR=\"FONT_COLOR\",e.FONT_SIZE=\"FONT_SIZE\",e.FONT_FAMILY=\"FONT_FAMILY\",e.FILL_COLOR=\"FILL_COLOR\",e.BORDER_COLOR=\"BORDER_COLOR\",e.AXIS_COLOR=\"AXIS_COLOR\",e.GRID_COLOR=\"GRID_COLOR\",e.OPACITY=\"OPACITY\",e.LINE_WEIGHT=\"LINE_WEIGHT\",e.LINE_STYLE=\"LINE_STYLE\",e.BORDER_RADIUS=\"BORDER_RADIUS\",e.INTERVAL=\"INTERVAL\",e.SELECT_RADIO=\"SELECT_RADIO\"}(t.ConfigStyleElementType||(t.ConfigStyleElementType={})),function(e){e.FILTER=\"FILTER\"}(t.DSInteractionType||(t.DSInteractionType={})),function(e){e.VIZ_READY=\"vizReady\",e.INTERACTION=\"vizAction\"}(t.ToDSMessageType||(t.ToDSMessageType={})),function(e){e.FILTER=\"FILTER\"}(t.InteractionType||(t.InteractionType={}))},function(e,t,R){\"use strict\";R.r(t),R.d(t,\"LOCAL\",(function(){return C}));const n=R(2),C=!1,r=e=>{const t=20,R=20,C=20,r=20,E=(d3.select(\"svg\").remove(),n.getWidth()),o=n.getHeight()-4;if(o<0)return void ut.displayError(ut.SVG_TOO_SMALL,ut.C_SVG_TOO_SMALL);var a=d3.scaleSqrt().domain([0,1e6]).range([0,15]);const i=e.tables.DEFAULT,N=e.tables.CALIFORNIA,_=e.tables.DISTRICT_OUTER,u=e.tables.DISTRICT_INNER;var s=[];i.forEach((function(e,t){s[t]=[e.dimension[1],e.dimension[0],e.metric[0]]}));var c=d3.geoAlbers().scale(1).translate([0,0]),U=d3.geoPath().projection(c),Y=d3.select(\"body\").append(\"svg\").attr(\"width\",E).attr(\"height\",o),T=(Y.append(\"g\").attr(\"width\",E-t-R).attr(\"height\",o-C-r).attr(\"transform\",`translate(${t}, ${C})`),u[0].features),f=_[0].features[0];c.scale(1).translate([0,0]);var d=U.bounds(f),O=.95/Math.max((d[1][0]-d[0][0])/E,(d[1][1]-d[0][1])/o),l=[(E-O*(d[1][0]+d[0][0]))/2,(o-O*(d[1][1]+d[0][1]))/2];c.scale(O).translate(l),Y.append(\"path\").datum(N).attr(\"class\",\"feature\").attr(\"d\",U).datum(f).attr(\"class\",\"outline\").attr(\"d\",U),T.forEach((function(e){Y.append(\"path\").datum(e).attr(\"class\",\"inner\").attr(\"d\",U)}));Y.append(\"g\").attr(\"class\",\"bubble\").selectAll(\"circle\").data(s).enter().append(\"circle\").attr(\"r\",(function(e){return 100*a(e[2])})).attr(\"transform\",(function(e){return\"translate(\"+c([e[0],e[1]])+\")\"}))};C?r(local.message):n.subscribeToData(r,{transform:n.objectTransform})},function(e,t,R){\"use strict\";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,R=1,n=arguments.length;R<n;R++)for(var C in t=arguments[R])Object.prototype.hasOwnProperty.call(t,C)&&(e[C]=t[C]);return e}).apply(this,arguments)};Object.defineProperty(t,\"__esModule\",{value:!0});\n/*!\n  @license\n  Copyright 2019 Google LLC\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n  https://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\nvar C=R(0);!function(e){for(var R in e)t.hasOwnProperty(R)||(t[R]=e[R])}(R(0)),t.getWidth=function(){return document.body.clientWidth},t.getHeight=function(){return document.documentElement.clientHeight},t.getComponentId=function(){var e=new URLSearchParams(window.location.search);if(null!==e.get(\"dscId\"))return e.get(\"dscId\");throw new Error(\"dscId must be in the query parameters. This is a bug in ds-component, please file a bug: https://github.com/googledatastudio/ds-component/issues/new\")};var r=function(e){return e.type===C.ConfigDataElementType.DIMENSION||e.type===C.ConfigDataElementType.METRIC},E=function(e){return e===C.ConfigDataElementType.DIMENSION?-1:1},o=function(e){var t=[];e.config.data.forEach((function(e){e.elements.filter(r).forEach((function(e){t.push(e)}))}));var R,n=(R=function(e,t){return E(e.type)-E(t.type)},t.map((function(e,t){return{item:e,index:t}})).sort((function(e,t){return R(e.item,t.item)||e.index-t.index})).map((function(e){return e.item}))),C=[];return n.forEach((function(e){e.value.forEach((function(){return C.push(e.id)}))})),C},a=function(e){var t,R=o(e),n=((t={})[C.TableType.DEFAULT]=[],t);return e.dataResponse.tables.forEach((function(e){var t=e.rows.map(function(e){return function(t){var R,n,C={};return(R=t,n=e,R.length<n.length?R.map((function(e,t){return[e,n[t]]})):n.map((function(e,t){return[R[t],e]}))).forEach((function(e){var t=e[0],R=e[1];void 0===C[R]&&(C[R]=[]),C[R].push(t)}),{}),C}}(R));e.id===C.TableType.DEFAULT?n[e.id]=t:(void 0===n[e.id]&&(n[e.id]=[]),n[e.id]=n[e.id].concat(t))})),n},i=function(e){var R,r=t.fieldsByConfigId(e),E=o(e),a={},i=E.map((function(e){void 0===a[e]?a[e]=0:a[e]++;var t=a[e],R=r[e][t];return n(n({},R),{configId:e})})),N=((R={})[C.TableType.DEFAULT]={headers:[],rows:[]},R);return e.dataResponse.tables.forEach((function(e){N[e.id]={headers:i,rows:e.rows}})),N};t.fieldsByConfigId=function(e){var t=function(e){return e.fields.reduce((function(e,t){return e[t.id]=t,e}),{})}(e),R={};return e.config.data.forEach((function(e){e.elements.filter(r).forEach((function(e){R[e.id]=e.value.map((function(e){return t[e]}))}))})),R};var N=function(e){var t={};return(e.config.style||[]).forEach((function(e){e.elements.forEach((function(e){if(void 0!==t[e.id])throw new Error(\"styleIds must be unique. Your styleId: '\"+e.id+\"' is used more than once.\");t[e.id]={value:e.value,defaultValue:e.defaultValue}}))}),{}),t},_=function(e){return e.config.themeStyle},u=function(e){switch(e){case C.DSInteractionType.FILTER:return C.InteractionType.FILTER}},s=function(e){var t=e.config.interactions;return void 0===t?{}:t.reduce((function(e,t){var R=t.supportedActions.map(u),n={type:u(t.value.type),data:t.value.data};return e[t.id]={value:n,supportedActions:R},e}),{})};t.tableTransform=function(e){return{tables:i(e),fields:t.fieldsByConfigId(e),style:N(e),theme:_(e),interactions:s(e)}},t.objectTransform=function(e){return{tables:a(e),fields:t.fieldsByConfigId(e),style:N(e),theme:_(e),interactions:s(e)}};var c=function(e){var R=!1;return(e===t.tableTransform||e===t.objectTransform||function(e){var t=!1;return\"identity\"===e(\"identity\")&&(t=!0,console.warn(\"This is an unsupported data format. Please use one of the supported transforms:\\n       dscc.objectFormat or dscc.tableFormat.\")),t}(e))&&(R=!0),R};t.subscribeToData=function(e,R){if(c(R.transform)){var n=function(t){t.data.type===C.MessageType.RENDER?e(R.transform(t.data)):console.error(\"MessageType: \"+t.data.type+\" is not supported by this version of the library.\")};window.addEventListener(\"message\",n);var r={componentId:t.getComponentId(),type:C.ToDSMessageType.VIZ_READY};return window.parent.postMessage(r,\"*\"),function(){return window.removeEventListener(\"message\",n)}}throw new Error(\"Only the built in transform functions are supported.\")},t.sendInteraction=function(e,R,n){var r=t.getComponentId(),E={type:C.ToDSMessageType.INTERACTION,id:e,data:n,componentId:r};window.parent.postMessage(E,\"*\")},t.clearInteraction=function(e,R){t.sendInteraction(e,R,void 0)}}]);","extractedComments":[]}